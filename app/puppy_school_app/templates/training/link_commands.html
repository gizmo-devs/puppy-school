{% extends 'layout/base.html' %}

{% block title %}Link Commands{% endblock %}

{% block content %}
<div class="container-fluid">
    <h1 class="mt-4">Training</h1>
    <ol class="breadcrumb mb-4">
        <li class="breadcrumb-item">
            <a href="{{url_for('training.index')}}">Training</a>
        </li>
        <li class="breadcrumb-item active">Link Commands</li>
    </ol>
    <div class="card mb-4">
        <div class="card-header d-flex">
            <h3>
                <i class="fas fa-dog mr-1"></i> {{dog_info.name}}
            </h3>
            <button type="button" class="btn btn-primary ml-auto" data-toggle="modal" data-target="#walkModal">
                Log Training
            </button>
        </div>
        <div class="card-body">
            {% for command in dog_training %}
            {{"<div class='row'>"|safe if loop.index0 % 2 == 0 }}
                <div class="col-6">
                    <div class="card mb-4">
                        <div class="card-header d-flex">
                            <h3>{{command.command}}</h3>
                            <span class="ml-auto mr-1 badge badge-secondary align-self-center">
                                {{command.level}}
                            </span>
                            {% set action = ['add', 'fa-plus', 'success'] if command.dog_id == None else ['remove', 'fa-minus', 'danger']%}
                            <button data-dog-id="{{dog_info.id}}" data-command-id="{{command.id}}" data-action="{{action[0]}}"
                                    class="btn btn-{{action[2]}} ajax_update_btn">
                                <i class="fas {{action[1]}}"></i></button>
                        </div>
                        <div class="card-body">
                            {{command.description if not command.description == None }}
                            <h4>History</h4>
                            {% if command.progress|length > 0 %}
                            <table class="table">
                                <thead>
                                <tr>
                                    <th>Date</th><th>Score</th>
                                </tr>
                                </thead>
                                <tbody>
                                    {% for rec in command.progress%}
                                    <tr>
                                        <td>{{rec.rec_date.strftime('%d %b %H:%M')}}</td>
                                        <td>{{rec.command_progress}}</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                            {% else %}
                            Nothing Recorded
                            {% endif %}
                        </div>
                    </div>
                </div>
            {{ "</div>"|safe if (loop.index0 % 2 == 1) or loop.last }}
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}